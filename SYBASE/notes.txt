log file : /sybase/<SID>/ASE-16_0/install
log file : /hana/shared/HDB/HDB00/s15sp1-h2-ha1/trace

# 連線
isql -Usapsa -P<pwd> -S<SID> -X

# default sa is lock, to unlock sa
isql -Usapsso -SN74 -X -P<pwd>
1> sp_locklogin 'sa', 'unlock'
2> go

Remember to 'lock' 'sa' login once the maintenance is complete
 
Syntax:
1> sp_locklogin 'sa', 'lock'
2> go

# check db users
1> sp_helpuser

# SUM db connecton error
改過密碼，所以重設Secure Storage的密碼
use <sid>adm login

rsecssfx get DB_CONNECT/DEFAULT_DB_USER

rsecssfx put DB_CONNECT/DEFAULT_DB_USER SAPSR3DB -plain

rsecssfx put DB_CONNECT/DEFAULT_DB_PASSWORD <password>


# disable archiving log mode
# sp_dboption [dbname, optname, {true | false}]
sp_dboption <DB>, 'trunc',true


# start server (login syb<sid>)
./startserver -f /sybase/N74/ASE-16_0/install/RUN_N74
# stop server
> shutdown 
> go

# check device
sp_helpdevice

# list db
sp_helpdb
# description db
sp_helpdb <dbname>

# resize db
(1) resize device
use master
go
disk resize name="saptempdb_data_001", size="XXXXM" 
go
(2) Extended saptempdb onto the same device:
alter database saptempdb on saptempdb_dev_name="XXXXM"  /*This is the adidtional space you are adding to the database*/
go
(3) new device
(3-1)for data
1> disk init name = "N74_data_002", physname = "/sybase/N74/sapdata_1/N74_data_002.dat", size = "20480M"
2> use master
3> go
4> alter database N74on N74_data_002="10240M"
5> go
(3-2)for log
disk init name = "N74_log_003", physname = "/sybase/N74/saplog_1/N74_log_003.dat", size = "10240M"
alter database N74 log on N74_log_003="10240M" 

# simpel backup restore
dump database target_db to "/dumps/source_db.dmp"
load database target_db from "/dumps/source_db.dmp"


# 
sp_cacheconfig "default data cache",
sp_configure  "default data cache"
sp_helpcache


# rebuild index by command(or se14)
Take a ddlgen of the problem table from the command line (after logging in as syb<sid>:
ddlgen -USAPSR3 -P<SAPSR3_password> -SSID -DSID -TU -Ntablename -O tablename.ddl
Review the .ddl output and connect with isql and execute the command below (drop index <table_name.index_name>)

1. Connect using isql as below :
isql -Usapsa -S<SID> -X
2. Check the Indexes created for the table as below :
1> use SID
2> go
1> setuser "SAPSR3"
2> go
1> set quoted_identifier on
2> go
1> sp_helpindex "table_name"
2> go
Check the name of the required Index.
3. Drop the Index as below :
1> drop index "table_name"."index_name"
2> go
4. Verify using the below outputs :
1> sp_helpindex "table_name"
2> go
1> sp_help "table_name"
2> go


=> execute the create index command(s) from the .ddl file
isql -Sserver_name -Uuser_name -Ppassword -iase_ddl.sql -ologfile
create unique nonclustered index "SEOCOMPODF~0"
on N74.SAPSR3.SEOCOMPODF(CLSNAME, CMPNAME, VERSION)
with index_compression = page


# 
dbcc checktable("N74.SAPSR3.SEOCOMPODF")
dbcc checkindex ("N74.SAPSR3.SEOCOMPODF~X")
